<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Tirts & Tigu – Simple Admin</title>
    <link rel="stylesheet" href="style.css">
  </head>

  <body>
    <!-- LOGIN SCREEN -->
    <div id="login-screen" class="box">
      <h2>Admin Login</h2>
      <p>Enter password to continue.</p>
      <input type="password" id="password-input" placeholder="Password">
      <button onclick="checkPassword()">Enter</button>
      <p id="error" style="color:red; display:none;">Wrong password</p>
    </div>

    <!-- ADMIN SCREEN -->
    <div id="admin-screen" style="display:none;">
      <h1>Tirts & Tigu Admin</h1>
      <p>Select a project to edit or create a new one.</p>

      <button id="add-project-btn">+ Add New Project</button>

      <div id="project-list" style="margin-top: 20px;">
        <p>Loading projects…</p>
      </div>
    </div>

    <script>
      const PASSWORD = "tirts123"; // change anytime

      function checkPassword() {
        const input = document.getElementById("password-input").value;
        if (input === PASSWORD) {
          document.getElementById("login-screen").style.display = "none";
          document.getElementById("admin-screen").style.display = "block";
          loadProjects();
        } else {
          document.getElementById("error").style.display = "block";
        }
      }

      async function loadProjects() {
        const list = document.getElementById("project-list");
        list.innerHTML = "<p>Loading projects…</p>";

        try {
          const response = await fetch(
            "https://api.github.com/repos/triinuklein/tirts-tigu/contents/content/projects"
          );
          const data = await response.json();

          list.innerHTML = "";

          data.forEach(item => {
            if (item.type === "dir") {
              const div = document.createElement("div");
              div.style.marginBottom = "10px";

              div.innerHTML = `
                <strong>${item.name}</strong>
                <button onclick="editProject('${item.name}')">Edit</button>
              `;

              list.appendChild(div);
            }
          });
        } catch (err) {
          list.innerHTML = "<p>Error loading projects.</p>";
        }
      }

      function editProject(name) {
        alert("Editor for " + name + " coming next!");
      }
    </script>
  </body>
</html>
